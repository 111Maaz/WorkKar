# Supabase Setup Guide

## Database Migration

To set up the database tables, run the following SQL in your Supabase SQL Editor:

### 1. Enable PostGIS Extension
```sql
create extension if not exists postgis with schema extensions;
```

### 2. Create Workers Table
```sql
create table public.workers (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone not null default now(),
  full_name text not null,
  mobile_number text not null unique,
  business_name text,
  service_category text not null,
  service_subcategory text not null,
  location_address text,
  location_coordinates geometry(Point, 4326)
);
```

### 3. Set Up Row Level Security
```sql
-- Add a policy to allow public inserts (for the sign-up form)
alter table public.workers enable row level security;

create policy "Enable insert for anyone"
on public.workers for insert with check (true);

-- Allow public reads for the dashboard
create policy "Enable read for anyone"
on public.workers for select using (true);
```

## Environment Variables

Make sure your `.env` file contains:
```env
VITE_SUPABASE_URL=your_supabase_project_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key
```

## Features

- ✅ One-time worker sign-up (no authentication required)
- ✅ Direct database insertion
- ✅ Location picker with map integration
- ✅ Category and subcategory selection
- ✅ Dashboard displays workers from database
- ✅ Category filtering
- ✅ Distance calculation (if location access granted)
- ✅ Search functionality

## How to Run

1. Run the SQL migration in Supabase dashboard
2. Ensure `.env` file is configured
3. Start the development server: `npm run dev`
4. Navigate to `/auth` to test worker sign-up
5. Navigate to `/` to see the dashboard with workers 